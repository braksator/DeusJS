class e{constructor(){i(this,{c:{},e:{},state:{},h:[],r:{},a:(e,n,o)=>{r(e,t(n,e),t(o),o)},l:(e,t,n,o,r)=>("string"!=typeof e?(r=new e,e=r.constructor.name):r=new(d.r[e]||require(n+e)),i(r,{props:t,p:o,n:e,i:Math.random()+""+Date.now()}),!r.load||r.load(),r),Cmp:class{constructor(e=this){e.state={},e.c=[]}set(e,t=this){i(t.state,e),c(t,t.e.parentNode)}use(e,t,n,o,r=this){return(o=r.c.find(e=>e==e.n&&s(t,e.p)))?o=o.c:r.c.push(o=d.l(e,t,n||"./cmp/",r)),`<c- i=${o.i}>`}}})}go(e,t,n,o=l.body,r){r=d.l(e,t,n||"./scr/"),history.pushState(t,r.title,r.n),d.h.push(r),c(r,o)}back(e=-1){d.h.pop(),history.go(e)}on(e,t){(d.e[e]||(d.e[e]=[])).push(t)}once(e,t){d.on(e,n=>{d.off(e,t),t(n)})}emit(e,t){d.e[e].forEach(e=>e(t))}off(e,t){d.e[e]=d.e[e].filter(e=>!s(e,t)),d.e[e].length||delete d.e[e]}set(e){i(d.state,e)}}let t=(e,n,o,r)=>[...e.children].map(e=>(r={c:e.children&&e.children.length?null:e.textContent,a:1!=e.nodeType?[]:[...e.attributes].map(e=>({n:e.name,v:e.value})),t:3==e.nodeType?"text":8==e.nodeType?"comment":e.tagName.toLowerCase(),e,d:n},r.s=o||"svg"==r.t,r.k=t(e,n,r.s),r)),n=(e,t,n)=>{t.forEach(t=>"class"==t.n?e.className=t.v:"style"==t.n?(n=t.v.split(";").reduce((e,t)=>(~t.trim().indexOf(":")&&e.push(t.split(":")),e),[]).forEach(t=>e.style[t[0]]=t[1]),[...e.style].filter(t=>!n.find(n=>n[0]==t&&n[1]==e.style[t])).forEach(t=>e.style[t]="")):e.setAttribute(t.n,t.v||!0))},o=(e,t,r,s)=>"c-"==e.t?c(e.d.c.find(t=>t.i==e.a[0].v),t)&&0:("text"==e.t&&(r=l.createTextNode(e.c))||"comment"==e.t&&l.createComment(e.c)||e.s&&l.createElementNS("http://www.w3.org/2000/svg",e.t)||(r=l.createElement(e.t)),n(r,e.a),e.k.length&&e.k.forEach(e=>(s=o(e,r))&&r.appendChild(s))||"text"!=e.t&&(r.textContent=e.c),r),r=(e,t,c,s,a)=>{for(a=c.length-1;a>=t.length;a--)s.removeChild(c[a].e);t.forEach((t,i,h)=>{(h=c[i])?t.t!=h.t?(a=o(t,s))&&s.replaceChild(a,h.e):(n(h.e,t.a.filter(e=>(a=h.a.find(t=>e.n==t.n),!a||a.v!=e.v))),h.a.filter(e=>!t.a.find(t=>e.n==t.n)).forEach(e=>{"class"==e.n&&(h.e.className="")||"style"==e.n&&[...h.e.style].forEach(e=>h.e.style[e]="")||h.e.removeAttribute(e.n)}),t.c!=h.c&&(h.e.textContent=t.c),h.k.length^t.k.length?r(e,t.k,h.k,h.e):h.k.length?h.e.innerHTML="":(a=l.createDocumentFragment(),r(e,t.k,h.k,a),s.appendChild(a))):(a=o(t,s))&&s.appendChild(a)})},c=(e,t,n)=>{n=a.parseFromString(e.html(),"text/html").body,e.c.forEach(e=>e.r=1),d.a(e,n,t),i(e,{e:n,r:0,c:e.c.filter(e=>e.r&&(!e.unload||e.unload()||1))}),!e.post||e.post()},s=(e,t,n)=>e===t||"function"==typeof e&&t&&e.toString()==t.toString()||e&&t&&"object"==typeof e&&e.constructor==t.constructor&&(n=h(t))&&n.length==h(e).length&&!n.find(n=>!s(e[n],t[n])),a=new DOMParser,l=document,i=Object.assign,h=Object.keys,d=new e;module.exports=d;